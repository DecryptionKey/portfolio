---
export const prerender = false;
import { getImage } from 'astro:assets';
import AppLayout from '../layouts/AppLayout';
import macBackground1 from '../assets/images/mac-background1.jpg';
import macBackground2 from '../assets/images/mac-background2.jpg';
import macBackground3 from '../assets/images/mac-background3.jpg';
import macBackground4 from '../assets/images/mac-background4.jpg';
import macBackground5 from '../assets/images/mac-background5.jpg';
import macBackground6 from '../assets/images/mac-background6.jpg';
import macBackground7 from '../assets/images/mac-background7.jpg';
import macBackground8 from '../assets/images/mac-background8.jpg';
import macBackground9 from '../assets/images/mac-background9.jpg';
import macBackground10 from '../assets/images/mac-background10.jpg';
import macBackground11 from '../assets/images/mac-background11.jpg';
import macBackground12 from '../assets/images/mac-background12.jpg';
import macBackground13 from '../assets/images/mac-background13.jpg';
import macBackground14 from '../assets/images/mac-background14.jpg';
import macBackground15 from '../assets/images/mac-background15.jpg';
import macBackground16 from '../assets/images/mac-background16.jpg';
import macBackground17 from '../assets/images/mac-background17.jpg';


const backgrounds = [
  macBackground1,
  macBackground2,
  macBackground3,
  macBackground4,
  macBackground5,
  macBackground6,
  macBackground7,
  macBackground8,
  macBackground9,
  macBackground10,
  macBackground11,
  macBackground12,
  macBackground13,
  macBackground14,
  macBackground15,
  macBackground16,
  macBackground17
];

function getRandomBackground() {
  return `bg-${Math.floor(Math.random() * backgrounds.length) + 1}`;
}

const optimizedBackgrounds = await Promise.all(
  backgrounds.map((bg) =>
    getImage({
      src: bg,
      width: 3500,
    })
  )
);

const backgroundMap = Object.fromEntries(
  optimizedBackgrounds.map((bg, index) => [`bg-${index + 1}`, bg.src])
);
---

<AppLayout
  client:load
  initialBg={getRandomBackground()}
  backgroundMap={backgroundMap}
/>
